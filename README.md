# AWS API Gateway Module

This module, sourced from `git@github.com:Pumoxi/tf_module_aws_api_gateway.git`, is designed to configure an API Gateway for an AWS Lambda function. This document provides an overview of the parameters, setup instructions, and an example usage.

## Table of Contents

- [Usage](#usage)
- [Requirements](#requirements)
- [Inputs](#inputs)
- [Outputs](#outputs)
- [Example](#example)

## Usage

This module sets up an AWS API Gateway that triggers an AWS Lambda function. Follow the instructions below to properly configure and deploy this module within your Terraform setup.

## Requirements

- **Terraform v0.13+**: Make sure you are using a compatible version of Terraform.
- **AWS Provider**: Configure the AWS provider in your root module or main Terraform configuration to ensure access to your AWS account.

## Inputs

Here are the required inputs for the module configuration:

| Name                | Description                                   | Type   | Required | Example                                |
|---------------------|-----------------------------------------------|--------|----------|----------------------------------------|
| `function_name`     | Name of the Lambda function                   | string | Yes      | `"my_lambda_function"`                 |
| `region`            | AWS region where the resources will be deployed | string | Yes      | `"us-east-1"`                          |
| `application`       | Name of the application                       | string | Yes      | `"my_app"`                             |
| `resource_name`     | Unique identifier for the API resource        | string | Yes      | `"my_app_my_lambda_function_v1"`       |
| `domain_name`       | Domain name for the API Gateway               | string | Yes      | `"myapp.com"`                          |
| `lambda_invoke_arn` | ARN of the Lambda function to be invoked      | string | Yes      | `"arn:aws:lambda:us-east-1:1234567890:function:my_lambda_function"` |

## Outputs

Refer to the module source documentation for detailed information on module outputs, if any.

## Example

Here is an example of how to integrate the `api` module into your Terraform configuration to create an API Gateway that will invoke a specified Lambda function.

```hcl
# Main.tf
provider "aws" {
  region = var.region
}

module "api" {
  source           = "git@github.com:Pumoxi/tf_module_aws_api_gateway.git//terraform"

  function_name    = var.function_name
  region           = var.region
  application      = var.application
  resource_name    = "${var.application}_${var.function_name}_${var.appl_version}"
  domain_name      = "${var.application}.com"
  lambda_invoke_arn = aws_lambda_function.lambda.invoke_arn
}

resource "aws_lambda_function" "lambda" {
  function_name = var.function_name
  # other lambda configuration...
}
```

### Example Variable Definitions

Define variables in `variables.tf`:

```hcl
variable "function_name" {
  description = "Name of the Lambda function"
  type        = string
}

variable "region" {
  description = "AWS region where the resources will be deployed"
  type        = string
}

variable "application" {
  description = "Name of the application"
  type        = string
}

variable "appl_version" {
  description = "Version of the application"
  type        = string
}

variable "lambda_invoke_arn" {
  description = "ARN of the Lambda function to be invoked by API Gateway"
  type        = string
}
```

Define values in `terraform.tfvars`:

```hcl
function_name = "my_lambda_function"
region = "us-east-1"
application = "my_app"
appl_version = "v1"
```

### Steps to Trigger the Module

1. **Define Lambda Function**: Make sure you have a Lambda function configured with an ARN that matches `lambda_invoke_arn`.
2. **Apply Configuration**: Run `terraform init` to initialize the module. Then, use `terraform apply` to create the resources.
3. **Access the API**: Once deployed, the API Gateway should be accessible at the endpoint generated by the module.